general:
  branches:
    ignore:
      - gh-pages # list of branches to ignore
      - /release\/.*/ # or ignore regexes

machine:
  environment:
    TERM: dumb
  java:
    version: oraclejdk7

test:
  override:
    - ./gradlew clean check jacocoTestReport
  post:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
    - find . -type f -regex ".*/build/.*-reports/.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit/ \;
    - mkdir -p $CIRCLE_ARTIFACTS
    - find . -type d -regex ".*/reports/\(jacoco\)" -exec cp -R {} $CIRCLE_ARTIFACTS \;

deployment:
  snapshot:
    branch: master
    commands:
      - ./gradlew uploadArchives -Pci
